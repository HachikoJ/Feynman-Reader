# 书架批量管理功能

## 功能概述
为书架添加了完整的批量管理功能，支持批量选择、批量删除和批量修改状态。

## 新增功能

### 1. 批量管理模式
- 点击"批量管理"按钮进入批量选择模式
- 批量模式下，书籍卡片显示复选框
- 点击"退出批量"返回正常模式

### 2. 批量选择
- **单个选择**：点击书籍卡片上的复选框
- **全选**：点击工具栏的"全选"按钮
- **取消全选**：点击工具栏的"取消全选"按钮
- 实时显示已选择的书籍数量

### 3. 批量操作

#### 批量删除
- 选择书籍后，点击"批量删除"按钮
- 弹出确认对话框，显示将要删除的书籍数量
- 确认后批量删除所有选中的书籍
- 删除后自动退出批量模式

#### 批量修改状态
- 选择书籍后，点击"修改状态"按钮
- 弹出状态选择对话框
- 可选择：未读、在读、已读
- 确认后批量修改所有选中书籍的状态
- 修改后自动退出批量模式

### 4. 界面优化

#### 网格视图
- 批量模式下，复选框显示在左上角
- 状态标签和分数标签自动右移，避免遮挡复选框
- 批量模式下隐藏悬停操作按钮（阅读、编辑、删除）

#### 列表视图
- 批量模式下，复选框显示在最左侧
- 批量模式下隐藏底部操作按钮

#### 批量操作工具栏
- 显示已选择的书籍数量
- 提供全选/取消全选快捷操作
- 只有选中书籍时才显示操作按钮
- 使用醒目的颜色和图标

## 使用流程

1. **进入批量模式**
   - 点击右上角的"批量管理"按钮

2. **选择书籍**
   - 点击书籍卡片上的复选框选择单个书籍
   - 或点击"全选"按钮选择所有书籍

3. **执行批量操作**
   - 批量删除：点击"批量删除"→ 确认
   - 批量修改状态：点击"修改状态"→ 选择状态

4. **退出批量模式**
   - 点击"退出批量"按钮
   - 或完成批量操作后自动退出

## 技术实现

### 状态管理
```typescript
const [batchMode, setBatchMode] = useState(false)
const [selectedBooks, setSelectedBooks] = useState<Set<string>>(new Set())
const [showBatchDeleteConfirm, setShowBatchDeleteConfirm] = useState(false)
const [showBatchStatusModal, setShowBatchStatusModal] = useState(false)
```

### 核心函数
- `toggleBatchMode()`: 切换批量模式
- `toggleBookSelection(bookId)`: 切换单个书籍选中状态
- `selectAll()`: 全选
- `deselectAll()`: 取消全选
- `confirmBatchDelete()`: 批量删除
- `handleBatchChangeStatus(status)`: 批量修改状态

### 交互优化
- 批量模式下点击书籍卡片切换选中状态，不打开书籍
- 批量模式下隐藏单个操作按钮，避免误操作
- 操作完成后自动退出批量模式，提升用户体验

## 注意事项

1. 批量删除操作不可恢复，请谨慎使用
2. 批量修改状态会覆盖原有状态
3. 批量操作只对当前筛选结果生效
4. 切换标签页或筛选条件会保持批量模式，但选中状态会清空

## 测试建议

1. 测试批量选择功能
   - 单个选择/取消选择
   - 全选/取消全选
   - 切换视图模式（网格/列表）

2. 测试批量删除
   - 删除单本书
   - 删除多本书
   - 取消删除操作

3. 测试批量修改状态
   - 修改为未读
   - 修改为在读
   - 修改为已读
   - 取消修改操作

4. 测试界面响应
   - 批量模式下的视觉反馈
   - 选中状态的视觉反馈
   - 操作按钮的启用/禁用状态
