# 费曼阅读法应用 - 产品需求文档 (PRD)

## 文档信息
- **产品名称**: 费曼阅读法 (Feynman Reading Method)
- **版本**: v1.0
- **创建日期**: 2026-01-21
- **文档类型**: 完整功能需求文档
- **文档状态**: 已实现功能梳理

---

## 1. 产品概述

### 1.1 产品定位
费曼阅读法是一款基于费曼学习法的智能阅读辅助工具，通过"以教代学"的方式帮助用户深度理解书籍内容。

### 1.2 核心价值主张
- **深度理解**: 通过6个阶段的系统化分析，全方位理解一本书
- **主动学习**: 通过教学模拟和角色问答，主动发现理解盲点
- **AI辅助**: 利用DeepSeek AI进行智能分析、评估和反馈
- **知识管理**: 完整的书籍管理、笔记记录和进度追踪

### 1.3 目标用户
- 深度阅读爱好者
- 知识工作者
- 学生和研究人员
- 终身学习者

### 1.4 技术栈
- **前端框架**: Next.js 14 (App Router)
- **开发语言**: TypeScript
- **样式方案**: Tailwind CSS
- **AI服务**: DeepSeek API
- **数据存储**: LocalStorage (浏览器本地)
- **文档解析**: PDF.js, Mammoth.js, XLSX

---

## 2. 功能模块清单

### 2.1 核心功能模块

1. **书架管理系统** - 书籍的增删改查、分类筛选、标签管理
2. **六阶段学习系统** - 背景探索、全书概览、深度拆解、辩证分析、众声回响、融会贯通
3. **费曼实践系统** - 教学模拟、角色问答、AI评分
4. **文档上传与解析** - 支持多种格式文档上传并自动提取内容
5. **笔记与记录系统** - 阅读笔记、实践记录、历史追踪
6. **设置与个性化** - API配置、语言切换、主题切换、金句管理
7. **数据统计与可视化** - 阅读进度、得分分布、学习统计

### 2.2 辅助功能模块
1. **批量管理** - 批量选择、批量删除书籍
2. **标签管理** - 全局标签编辑、分类管理
3. **书籍推荐** - AI生成相关书籍推荐
4. **多语言支持** - 中文/英文界面切换
5. **多主题支持** - 深色/浅色/科技蓝主题

---

## 3. 详细功能需求

### 3.1 书架管理系统

#### 3.1.1 书籍列表展示
**用户故事**: 作为用户，我希望能够查看我的所有书籍，以便管理我的阅读计划

**功能描述**:
- 支持网格视图和列表视图两种展示方式
- 显示书籍封面、书名、作者、简介、标签、阅读状态、学习进度、综合得分
- 支持按阅读状态筛选（全部/未读/在读/已读）
- 支持按分类和标签筛选
- 按最后访问时间降序排列（最近操作的书籍在最前面）

**验收标准**:
- ✅ 网格视图显示书籍卡片，包含封面、状态标签、得分标签
- ✅ 列表视图显示详细信息，包含进度条和操作按钮
- ✅ 筛选功能正常工作，实时更新列表
- ✅ 点击书籍卡片进入阅读详情页
- ✅ 页面滚动到顶部

#### 3.1.2 添加书籍
**用户故事**: 作为用户，我希望能够手动添加书籍，以便开始阅读学习

**功能描述**:
- 手动输入书名、作者、简介
- 上传封面图片
- 手动添加或AI生成标签
- 支持自定义分类和标签

**验收标准**:
- ✅ 必填字段：书名
- ✅ 选填字段：作者、简介、封面、标签
- ✅ 封面支持图片上传和预览
- ✅ 简介支持多行文本，自动调整高度
- ✅ 标签支持选择已有分类或自定义分类
- ✅ 添加成功后书籍出现在书架顶部

#### 3.1.3 编辑书籍
**用户故事**: 作为用户，我希望能够编辑书籍信息，以便更新或完善书籍资料

**功能描述**:
- 修改书名、作者、简介、封面
- 添加、删除、编辑标签
- AI重新生成标签
- 保存后更新书架显示

**验收标准**:
- ✅ 所有字段可编辑
- ✅ 标签管理界面友好，支持添加/删除
- ✅ 分类选择支持下拉选择和自定义输入
- ✅ 保存后立即生效

#### 3.1.4 删除书籍
**用户故事**: 作为用户，我希望能够删除不需要的书籍，以便保持书架整洁

**功能描述**:
- 单个删除：点击删除按钮，弹出确认对话框
- 批量删除：进入批量模式，选择多本书籍后批量删除
- 删除后无法恢复，所有阅读记录丢失

**验收标准**:
- ✅ 删除前显示确认对话框
- ✅ 对话框显示书名和警告信息
- ✅ 确认后立即删除，书架更新
- ✅ 批量删除显示选中数量

#### 3.1.5 批量管理
**用户故事**: 作为用户，我希望能够批量管理书籍，以便高效处理多本书籍

**功能描述**:
- 进入/退出批量模式
- 单个选择、全选、取消全选
- 批量删除
- 显示已选择数量

**验收标准**:
- ✅ 批量模式下显示复选框
- ✅ 批量模式下隐藏单个操作按钮
- ✅ 全选/取消全选功能正常
- ✅ 批量删除需要二次确认
- ✅ 操作完成后自动退出批量模式



#### 3.1.6 标签系统
**用户故事**: 作为用户，我希望能够通过标签组织和筛选书籍，以便快速找到相关书籍

**功能描述**:
- AI自动生成标签（基于书名、作者、简介）
- 手动添加/删除标签
- 标签包含分类和名称两个维度
- 支持按分类和标签筛选书籍
- 全局标签管理（编辑、删除、重命名）

**验收标准**:
- ✅ AI生成的标签准确相关
- ✅ 标签显示分类和名称
- ✅ 筛选功能实时生效
- ✅ 全局标签管理影响所有相关书籍
- ✅ 删除标签前显示影响的书籍数量

#### 3.1.7 数据统计
**用户故事**: 作为用户，我希望能够查看阅读统计数据，以便了解我的学习进展

**功能描述**:
- 总书籍数、未读数、在读数、已读数
- 平均得分
- 阅读状态分布图
- 得分分布图（优秀/合格/待提升）

**验收标准**:
- ✅ 统计数据实时更新
- ✅ 图表清晰易读
- ✅ 支持展开/折叠详细分析
- ✅ 无数据时显示友好提示

---

### 3.2 六阶段学习系统

#### 3.2.1 阶段概览
**用户故事**: 作为用户，我希望能够系统化地学习一本书，以便全面深入地理解内容

**功能描述**:
- 六个学习阶段：背景探索、全书概览、深度拆解、辩证分析、众声回响、融会贯通
- 每个阶段有独特的图标、标题、副标题、描述
- 显示学习进度和完成状态
- 支持阶段间跳转（已完成的阶段）

**验收标准**:
- ✅ 六个阶段清晰展示
- ✅ 进度条显示当前进度
- ✅ 已完成阶段显示✓标记
- ✅ 未完成阶段显示○标记
- ✅ 未解锁阶段显示🔒图标

#### 3.2.2 AI深度分析
**用户故事**: 作为用户，我希望AI能够深度分析书籍，以便获得专业的解读

**功能描述**:
- 一键启动AI分析所有阶段
- 后台依次分析，实时显示进度
- 分析过程中显示金句和进度条
- 支持基于上传文档内容的分析
- 分析结果使用Markdown格式展示

**验收标准**:
- ✅ 点击"开始AI深度分析"按钮启动
- ✅ 显示分析进度（X/6个阶段）
- ✅ 分析过程中显示警告：不要关闭页面
- ✅ 分析完成后可查看所有阶段内容
- ✅ 如果有文档内容，AI基于文档分析

#### 3.2.3 阶段学习
**用户故事**: 作为用户，我希望能够逐个阶段学习，以便循序渐进地理解书籍

**功能描述**:
- 查看当前阶段的AI分析结果
- 阅读Markdown格式的详细内容
- 完成当前阶段，解锁下一阶段
- 已完成阶段可随时回顾
- 未解锁阶段显示锁定提示

**验收标准**:
- ✅ 阶段内容完整展示
- ✅ Markdown渲染正确（标题、列表、引用、粗体）
- ✅ 完成按钮功能正常
- ✅ 完成后进度更新
- ✅ 最后一个阶段完成后跳转到实践

#### 3.2.4 阶段内容结构
**用户故事**: 作为用户，我希望每个阶段的内容结构清晰，以便快速抓住重点

**功能描述**:
- 核心要点：2-3句话概括
- 详细分析：多个维度的深入解读
- 使用二级标题组织内容
- 使用无序列表展示要点

**验收标准**:
- ✅ 每个阶段包含核心要点
- ✅ 内容结构清晰，层次分明
- ✅ 使用标准Markdown格式
- ✅ 禁止使用数字序号（1. 2. 3.）

---

### 3.3 费曼实践系统

#### 3.3.1 教学模拟
**用户故事**: 作为用户，我希望能够通过教学模拟检验我的理解，以便发现理解盲点

**功能描述**:
- 用户用自己的话解释书籍核心内容
- 最少200字要求
- AI评估准确度、完整度、清晰度、综合得分
- 60分及以上为合格
- 支持多次提交，取最高分

**验收标准**:
- ✅ 输入框支持多行文本
- ✅ 实时显示字数统计
- ✅ 少于200字时提交按钮禁用
- ✅ 提交后显示加载动画和金句
- ✅ 评估结果包含四个维度的分数
- ✅ 显示AI详细点评
- ✅ 合格/不合格状态清晰标识

#### 3.3.2 评分标准
**用户故事**: 作为用户，我希望评分标准严格公正，以便真正检验我的理解水平

**功能描述**:
- 准确度（Accuracy）：0-100分
- 完整度（Completeness）：0-100分
- 清晰度（Clarity）：0-100分
- 综合分（Overall）：0-100分
- 严格评分：敷衍回答给低分，优秀回答给高分
- 客户端计算passed状态（overall >= 60）

**验收标准**:
- ✅ 评分范围0-100分
- ✅ 敷衍回答（<20字）得0-10分
- ✅ 内容不足（<50字）最高40分
- ✅ 基本合格（60-70分）：理解准确、逻辑清晰、字数充足
- ✅ 优秀（85分+）：理解深刻、有独到见解
- ✅ AI点评具体明确，指出问题和改进方向



#### 3.3.3 角色问答
**用户故事**: 作为用户，我希望能够从不同角色视角回答问题，以便全面检验我的理解

**功能描述**:
- AI生成3个不同角色的问题
- 角色包括：小学生、大学生、职场新人、科学家、创业者、教师、投资人（批评者）、用户代表（批评者）、竞争对手（批评者）、逻辑杠精（批评者）
- 基于用户的教学模拟内容生成针对性问题
- 用户回答每个问题
- AI评估每个回答，给出分数和点评
- 支持重答未通过的问题
- 所有问题60分+才算通过

**验收标准**:
- ✅ 每次生成3个随机角色的问题
- ✅ 问题针对性强，能暴露理解漏洞
- ✅ 已通过的问题不需要重答
- ✅ 未通过的问题必须填写内容才能提交
- ✅ 空白回答导致提交按钮禁用
- ✅ 提交后只评估未通过的问题
- ✅ 所有问题通过后显示庆祝界面

#### 3.3.4 成绩展示
**用户故事**: 作为用户，我希望能够一眼看到我的学习成绩，以便了解我的学习进展

**功能描述**:
- 教学模拟成绩卡片：显示最高分、通过状态、记录数量
- 角色问答成绩卡片：显示最新平均分、通过状态、记录数量
- 卡片使用渐变背景和边框
- 点击卡片跳转并展开对应的历史记录
- 空状态显示"还没有记录"

**验收标准**:
- ✅ 成绩卡片醒目美观
- ✅ 教学模拟卡片：蓝紫色渐变
- ✅ 角色问答卡片：绿青色渐变
- ✅ 通过状态清晰标识（绿色✓/黄色未通过）
- ✅ 点击卡片平滑滚动到历史记录
- ✅ 有记录时显示hover效果

#### 3.3.5 实践记录
**用户故事**: 作为用户，我希望能够查看我的所有实践记录，以便回顾和对比

**功能描述**:
- 教学模拟记录：显示所有提交记录，包含分数、点评、提交时间
- 角色问答记录：显示所有问答记录，包含问题、回答、评分、点评
- 支持展开/折叠查看详情
- 支持删除单条记录
- 按时间倒序排列

**验收标准**:
- ✅ 记录列表清晰展示
- ✅ 显示四个维度的分数
- ✅ 显示合格/不合格状态
- ✅ 点评内容完整展示
- ✅ 删除功能正常，删除后重新计算得分

#### 3.3.6 最终评分机制
**用户故事**: 作为用户，我希望有一个公正的最终评分，以便客观评价我的学习成果

**功能描述**:
- 最终总分 = (教学模拟最高分 + 角色问答最高平均分) / 2
- 完成条件（所有条件必须同时满足）：
  - 教学模拟最高分 ≥ 60
  - 角色问答每次平均分都 ≥ 60
  - 角色问答最高平均分 ≥ 60
  - 最终总分 ≥ 60
- 满足条件后书籍自动标记为"已读"

**验收标准**:
- ✅ 最终总分计算正确
- ✅ 书架和详情页显示一致
- ✅ 完成条件严格执行
- ✅ 自动更新书籍状态
- ✅ 删除记录后重新计算

#### 3.3.7 完成提醒
**用户故事**: 作为用户，我希望清楚知道完成阅读的条件，以便有明确的学习目标

**功能描述**:
- 醒目的提醒卡片
- 清单式展示两个条件
- 实时状态反馈（已完成/未完成）
- 渐变背景和动画效果

**验收标准**:
- ✅ 提醒卡片醒目（黄橙红渐变）
- ✅ 条件清晰列出
- ✅ 状态实时更新
- ✅ 完成后提醒消失

---

### 3.4 文档上传与解析

#### 3.4.1 文档上传
**用户故事**: 作为用户，我希望能够上传文档添加书籍，以便快速导入学习资料

**功能描述**:
- 支持多种格式：PDF、Word（.docx）、Excel、Markdown、TXT、JSON
- 文件大小限制：50MB
- 拖拽或点击上传
- 上传后自动解析文档内容

**验收标准**:
- ✅ 支持的格式正确解析
- ✅ 文件大小超限时提示错误
- ✅ 上传界面友好
- ✅ 解析过程显示加载动画

#### 3.4.2 AI分析文档
**用户故事**: 作为用户，我希望AI能够自动分析文档，以便快速提取书籍信息

**功能描述**:
- AI分析文档内容，提取书名、作者、简介
- AI生成相关标签
- 返回置信度（0-100%）
- 用户可编辑AI提取的信息

**验收标准**:
- ✅ AI提取的信息基本准确
- ✅ 显示置信度
- ✅ 置信度高（≥70%）显示绿色提示
- ✅ 置信度低（<40%）显示红色提示
- ✅ 所有字段可编辑

#### 3.4.3 文档内容作为知识库
**用户故事**: 作为用户，我希望上传的文档内容能够作为知识库，以便AI基于原文分析

**功能描述**:
- 文档内容保存在书籍数据中
- AI分析时优先使用文档内容
- 六阶段分析基于文档内容
- 角色问答基于文档内容

**验收标准**:
- ✅ 文档内容完整保存
- ✅ AI分析时使用文档内容
- ✅ 分析结果更准确相关
- ✅ 文档内容截取前15000字符

#### 3.4.4 编辑确认
**用户故事**: 作为用户，我希望能够在添加前确认和编辑信息，以便确保信息准确

**功能描述**:
- 显示AI分析结果
- 编辑书名、作者、简介
- 添加/删除/编辑标签
- 简介支持多行文本，自动调整高度
- 标签支持自定义分类

**验收标准**:
- ✅ 所有字段可编辑
- ✅ 简介textarea自动调整高度
- ✅ 标签管理界面友好
- ✅ 确认后添加到书架



---

### 3.5 笔记与记录系统

#### 3.5.1 阅读笔记
**用户故事**: 作为用户，我希望能够记录阅读笔记，以便保存我的思考和收获

**功能描述**:
- 在笔记标签页记录笔记
- 笔记关联到具体阶段
- 支持多行文本输入
- 显示创建时间
- 支持删除笔记

**验收标准**:
- ✅ 笔记输入框友好
- ✅ 保存后立即显示
- ✅ 显示关联的阶段
- ✅ 按时间倒序排列
- ✅ 删除功能正常

#### 3.5.2 实践记录管理
**用户故事**: 作为用户，我希望能够管理我的实践记录，以便回顾和优化

**功能描述**:
- 查看所有教学模拟记录
- 查看所有角色问答记录
- 支持展开/折叠详情
- 支持删除记录
- 删除后自动重新计算得分和状态

**验收标准**:
- ✅ 记录完整展示
- ✅ 展开/折叠动画流畅
- ✅ 删除需要确认
- ✅ 删除后数据更新正确

---

### 3.6 设置与个性化

#### 3.6.1 API配置
**用户故事**: 作为用户，我希望能够配置API Key，以便使用AI功能

**功能描述**:
- 输入DeepSeek API Key
- 支持显示/隐藏密钥
- 密钥仅保存在本地浏览器
- 提供获取API Key的链接
- 未配置时显示提醒弹窗

**验收标准**:
- ✅ 密钥输入框支持密码模式
- ✅ 点击眼睛图标切换显示/隐藏
- ✅ 保存后立即生效
- ✅ 未配置时显示友好提示
- ✅ 提供"不再提醒"选项

#### 3.6.2 语言切换
**用户故事**: 作为用户，我希望能够切换界面语言，以便使用我熟悉的语言

**功能描述**:
- 支持中文和英文
- 一键切换，无需刷新
- 所有界面文字同步更新
- 保存用户选择

**验收标准**:
- ✅ 语言切换按钮清晰
- ✅ 切换后所有文字更新
- ✅ 下次打开保持选择
- ✅ 翻译准确完整

#### 3.6.3 主题切换
**用户故事**: 作为用户，我希望能够切换界面主题，以便适应不同的使用场景

**功能描述**:
- 支持三种主题：深色、浅色、科技蓝
- 一键切换，实时生效
- 主题包含背景色、文字色、强调色、边框色
- 保存用户选择

**验收标准**:
- ✅ 主题切换按钮清晰
- ✅ 切换后所有颜色更新
- ✅ 下次打开保持选择
- ✅ 三种主题视觉效果良好

#### 3.6.4 金句管理
**用户故事**: 作为用户，我希望能够管理加载时显示的金句，以便个性化我的体验

**功能描述**:
- 查看所有金句（预设+自定义）
- 添加自定义金句
- 编辑金句内容和作者
- 删除金句
- 恢复默认金句
- 加载时随机显示金句

**验收标准**:
- ✅ 金句列表清晰展示
- ✅ 区分预设和自定义金句
- ✅ 添加/编辑/删除功能正常
- ✅ 恢复默认功能正常
- ✅ 加载时随机显示

---

### 3.7 数据统计与可视化

#### 3.7.1 书架统计
**用户故事**: 作为用户，我希望能够查看书架统计数据，以便了解我的阅读情况

**功能描述**:
- 总书籍数、未读数、在读数、已读数
- 平均得分
- 四个统计卡片展示
- 支持展开查看详细图表

**验收标准**:
- ✅ 统计数据准确
- ✅ 卡片设计美观
- ✅ 实时更新
- ✅ 无数据时显示"-"

#### 3.7.2 阅读状态分布
**用户故事**: 作为用户，我希望能够查看阅读状态分布，以便了解我的阅读进度

**功能描述**:
- 未读、在读、已读的数量和占比
- 进度条可视化
- 不同状态使用不同颜色

**验收标准**:
- ✅ 进度条显示正确
- ✅ 颜色区分清晰
- ✅ 数量和占比准确
- ✅ 动画效果流畅

#### 3.7.3 得分分布
**用户故事**: 作为用户，我希望能够查看得分分布，以便了解我的学习质量

**功能描述**:
- 优秀（≥80分）、合格（60-79分）、待提升（<60分）
- 进度条可视化
- 不同等级使用不同颜色
- 无数据时显示提示

**验收标准**:
- ✅ 分类准确
- ✅ 进度条显示正确
- ✅ 颜色区分清晰
- ✅ 无数据时友好提示

---

### 3.8 书籍推荐

#### 3.8.1 AI生成推荐
**用户故事**: 作为用户，我希望能够获得相关书籍推荐，以便扩展我的阅读范围

**功能描述**:
- 基于当前书籍生成推荐
- AI分析书籍主题和内容
- 推荐相关书籍和理由
- 使用Markdown格式展示

**验收标准**:
- ✅ 推荐内容相关准确
- ✅ 包含书名、作者、推荐理由
- ✅ Markdown渲染正确
- ✅ 加载时显示动画

---

## 4. 用户界面设计

### 4.1 整体布局
- **导航栏**: 固定顶部，包含Logo、书架、设置按钮
- **主内容区**: 最大宽度6xl，居中显示
- **页脚**: 包含金句、功能特点、版权信息

### 4.2 视觉风格
- **设计语言**: 现代、简洁、科技感
- **颜色方案**: 
  - 科技蓝主题：蓝色强调色
  - 深色主题：深灰背景
  - 浅色主题：白色背景
- **字体**: Inter字体，清晰易读
- **图标**: Emoji图标，生动友好
- **动画**: 平滑过渡，提升体验

### 4.3 响应式设计
- **桌面端**: 网格布局，多列展示
- **移动端**: 单列布局，堆叠展示
- **断点**: sm (640px), md (768px), lg (1024px)

### 4.4 交互设计
- **按钮**: 清晰的hover效果
- **卡片**: hover时轻微放大和阴影
- **模态框**: 点击遮罩关闭
- **加载状态**: 显示金句和进度
- **错误提示**: 红色边框和文字

---

## 5. 数据模型

### 5.1 Book（书籍）
```typescript
interface Book {
  id: string                    // 唯一标识
  name: string                  // 书名
  author?: string               // 作者
  cover?: string                // 封面（URL或base64）
  description?: string          // 简介
  tags?: BookTag[]              // 标签
  documentContent?: string      // 文档内容（知识库）
  status: BookStatus            // 阅读状态
  currentPhase: number          // 当前阶段（0-5）
  noteRecords: NoteRecord[]     // 笔记记录
  responses: Record<string, string>  // 阶段分析结果
  practiceRecords: PracticeRecord[]  // 教学实践记录
  qaPracticeRecords: QAPracticeRecord[]  // 问答实践记录
  recommendations?: string      // 推荐内容
  bestScore: number             // 最终总分
  createdAt: number             // 创建时间
  updatedAt: number             // 更新时间
}
```

### 5.2 BookTag（标签）
```typescript
interface BookTag {
  name: string      // 标签名称
  category: string  // 分类
}
```

### 5.3 PracticeRecord（教学实践记录）
```typescript
interface PracticeRecord {
  id: string
  bookId: string
  content: string           // 用户的教学输出
  aiReview: string          // AI点评
  scores: {
    accuracy: number        // 准确度 0-100
    completeness: number    // 完整度 0-100
    clarity: number         // 清晰度 0-100
    overall: number         // 综合分 0-100
  }
  passed: boolean           // 是否合格（overall >= 60）
  createdAt: number
}
```

### 5.4 QAPracticeRecord（问答实践记录）
```typescript
interface QAPracticeRecord {
  id: string
  bookId: string
  questions: PersonaQuestion[]  // 3个角色的问题
  allPassed: boolean            // 是否全部通过
  createdAt: number
  updatedAt: number
}

interface PersonaQuestion {
  persona: PersonaType      // 角色类型
  personaName: string       // 角色名称
  question: string          // 问题
  userAnswer?: string       // 用户回答
  answeredAt?: number       // 回答时间
  aiReview?: string         // AI点评
  score?: number            // 得分 0-100
  passed?: boolean          // 是否通过
  reviewedAt?: number       // 评审时间
}
```



### 5.5 NoteRecord（笔记记录）
```typescript
interface NoteRecord {
  id: string
  type: 'note' | 'teaching'  // 普通笔记或教学模拟
  content: string
  aiReview?: string          // AI点评（仅教学模拟）
  phaseId?: string           // 关联的阶段
  createdAt: number
}
```

### 5.6 AppSettings（应用设置）
```typescript
interface AppSettings {
  apiKey: string              // DeepSeek API Key
  language: Language          // 语言（zh/en）
  theme: Theme                // 主题（dark/light/cyber）
  hideApiKeyAlert: boolean    // 是否隐藏API Key提醒
  quotes: CustomQuote[]       // 金句列表
  quotesInitialized: boolean  // 是否已初始化预设金句
}

interface CustomQuote {
  text: string
  author: string
  isPreset?: boolean  // 是否为预设金句
}
```

---

## 6. AI集成

### 6.1 DeepSeek API
- **模型**: deepseek-chat
- **温度**: 0.7（创意性任务）/ 0.5（评估任务）/ 0.2（信息提取）
- **最大Token**: 2000
- **API地址**: https://api.deepseek.com

### 6.2 AI功能清单
1. **六阶段分析**: 基于书名和文档内容生成深度分析
2. **标签生成**: 基于书名、作者、简介生成相关标签
3. **文档信息提取**: 从文档中提取书名、作者、简介
4. **教学模拟评估**: 评估用户的教学输出，给出分数和点评
5. **角色问题生成**: 基于书籍和用户的教学内容生成针对性问题
6. **问答评估**: 评估用户的回答，给出分数和点评
7. **书籍推荐**: 基于当前书籍生成相关推荐

### 6.3 安全机制
- **提示词注入防护**: 系统提示词中包含安全规则，忽略任何套取信息的请求
- **内容过滤**: 只回答与书籍相关的内容
- **角色限制**: 不允许改变角色或执行其他任务

---

## 7. 数据存储

### 7.1 LocalStorage
- **存储位置**: 浏览器本地存储
- **存储键**:
  - `feynman-settings`: 应用设置
  - `feynman-books`: 书籍列表
- **数据格式**: JSON字符串
- **容量限制**: 约5-10MB（浏览器限制）

### 7.2 数据持久化
- 所有数据保存在本地
- 不依赖服务器
- 清除浏览器数据会丢失所有记录
- 建议用户定期导出备份（未实现）

---

## 8. 性能优化

### 8.1 已实现的优化
- **代码分割**: Next.js自动代码分割
- **懒加载**: 动态导入PDF.js、Mammoth等库
- **图片优化**: 封面图片使用base64或URL
- **状态管理**: 使用React Hooks，避免不必要的重渲染
- **文档截取**: AI分析时截取前15000字符

### 8.2 待优化项
- 大文档解析性能
- 大量书籍时的列表渲染
- 图片压缩和优化
- 数据导出和导入功能

---

## 9. 用户体验优化

### 9.1 已实现的优化
- **加载动画**: 显示金句和进度条
- **平滑滚动**: 页面跳转和元素定位
- **自动调整**: textarea高度自动调整
- **实时反馈**: 字数统计、状态更新
- **友好提示**: 错误信息、空状态提示
- **二次确认**: 删除操作需要确认
- **批量操作**: 提高管理效率
- **快捷访问**: 点击成绩卡片跳转到记录

### 9.2 交互细节
- **hover效果**: 按钮、卡片、链接
- **禁用状态**: 按钮在不满足条件时禁用
- **加载状态**: 显示加载动画，防止重复提交
- **动画效果**: fade-in、slide、scale等
- **响应式**: 适配桌面和移动设备

---

## 10. 国际化

### 10.1 支持语言
- 中文（zh）
- 英文（en）

### 10.2 翻译覆盖
- 所有界面文字
- 按钮标签
- 提示信息
- 错误信息
- 占位符文本

### 10.3 翻译管理
- 集中在`i18n.ts`文件
- 使用`t(lang, key)`函数获取翻译
- 支持嵌套键值对

---

## 11. 浏览器兼容性

### 11.1 支持的浏览器
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 11.2 依赖的浏览器特性
- LocalStorage
- FileReader API
- Fetch API
- ES6+ JavaScript
- CSS Grid和Flexbox

---

## 12. 已知限制

### 12.1 功能限制
- 数据仅保存在本地，无云同步
- 文档大小限制50MB
- PDF解析不支持加密文件
- Word仅支持.docx格式，不支持.doc
- 无数据导出和导入功能
- 无多设备同步

### 12.2 性能限制
- 大文档解析可能较慢
- 大量书籍时列表渲染可能卡顿
- AI分析依赖网络速度
- LocalStorage容量限制

---

## 13. 未来规划

### 13.1 功能增强
- [ ] 数据导出和导入
- [ ] 云同步功能
- [ ] 多设备同步
- [ ] 学习统计报告
- [ ] 学习计划和提醒
- [ ] 社交分享功能
- [ ] 学习小组功能
- [ ] 更多AI模型支持

### 13.2 性能优化
- [ ] 虚拟滚动优化大列表
- [ ] 图片压缩和懒加载
- [ ] 离线功能支持
- [ ] 缓存策略优化

### 13.3 用户体验
- [ ] 更多动画效果
- [ ] 更智能的推荐算法
- [ ] 更个性化的设置
- [ ] 更友好的引导流程
- [ ] 快捷键支持

---

## 14. 总结

费曼阅读法应用是一款功能完善、设计精良的深度阅读工具。通过系统化的六阶段学习、严格的费曼实践评估、智能的AI辅助，帮助用户真正深入理解书籍内容。

### 14.1 核心优势
- ✅ **系统化学习**: 六阶段全方位理解
- ✅ **严格评估**: 防止自欺欺人，真正检验理解
- ✅ **AI辅助**: 智能分析、评估、推荐
- ✅ **完整管理**: 书籍、笔记、记录一站式管理
- ✅ **用户友好**: 界面美观、交互流畅、提示清晰
- ✅ **本地优先**: 数据安全、隐私保护

### 14.2 适用场景
- 深度阅读经典书籍
- 学习专业知识
- 准备考试和面试
- 写读书笔记和书评
- 建立个人知识体系

### 14.3 成功指标
- 用户完成率：用户完成六阶段学习的比例
- 实践通过率：用户通过费曼实践的比例
- 平均得分：用户的平均综合得分
- 书籍完成数：用户标记为"已读"的书籍数量
- 用户留存率：用户持续使用的比例

---

## 附录

### A. 术语表
- **费曼学习法**: 通过教学来检验和深化理解的学习方法
- **六阶段**: 背景探索、全书概览、深度拆解、辩证分析、众声回响、融会贯通
- **教学模拟**: 用户用自己的话解释书籍内容
- **角色问答**: 从不同角色视角回答问题
- **综合得分**: (教学模拟最高分 + 角色问答最高平均分) / 2

### B. 参考资料
- DeepSeek API文档: https://platform.deepseek.com/docs
- Next.js文档: https://nextjs.org/docs
- Tailwind CSS文档: https://tailwindcss.com/docs
- PDF.js文档: https://mozilla.github.io/pdf.js/
- Mammoth.js文档: https://github.com/mwilliamson/mammoth.js

---

**文档结束**
